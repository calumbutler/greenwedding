// COPYRIGHT Â© 2016 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.

define(["../../core/Accessoire","../../core/declare","../../core/kebabDictionary","../../core/lang","../../geometry/support/graphicsUtils"],function(e,t,r,s,i){var n=r({esriNAUCentimeters:"centimeters",esriNAUDecimalDegrees:"decimal-degrees",esriNAUDecimeters:"decimeters",esriNAUFeet:"feet",esriNAUInches:"inches",esriNAUKilometers:"kilometers",esriNAUMeters:"meters",esriNAUMiles:"miles",esriNAUMillimeters:"millimeters",esriNAUNauticalMiles:"nautical-miles",esriNAUPoints:"points",esriNAUYards:"yards"}),a=r({esriNAOutputLineNone:"none",esriNAOutputLineStraight:"straight",esriNAOutputLineTrueShape:"true-shape",esriNAOutputLineTrueShapeWithMeasure:"true-shape-with-measure"}),u=r({esriCentimeters:"centimeters",esriDecimalDegrees:"decimal-degrees",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriPoints:"points",esriYards:"yards"}),o=r({esriNFSBAllowBacktrack:"allow-backtrack",esriNFSBAtDeadEndsOnly:"at-dead-ends-only",esriNFSBNoBacktrack:"no-backtrack",esriNFSBAtDeadEndsAndIntersections:"at-dead-ends-and-intersections"}),l=t(e,{declaredClass:"esri.tasks.support.RouteParameters",accumulateAttributes:null,attributeParameterValues:null,barriers:null,directionsLanguage:null,directionsLengthUnits:null,directionsOutputType:null,directionsStyleName:null,directionsTimeAttribute:null,doNotLocateOnRestrictedElements:!0,findBestSequence:null,ignoreInvalidLocations:null,impedanceAttribute:null,outputLines:"true-shape",outputGeometryPrecision:null,outputGeometryPrecisionUnits:null,outSpatialReference:null,polygonBarriers:null,polylineBarriers:null,preserveFirstStop:null,preserveLastStop:null,restrictionAttributes:null,restrictUTurns:null,returnBarriers:!1,returnDirections:!1,returnPolygonBarriers:!1,returnPolylineBarriers:!1,returnRoutes:!0,returnStops:!1,returnZ:!0,startTime:null,startTimeIsUTC:null,stops:null,useHierarchy:null,useTimeWindows:null,travelMode:null,toJSON:function(e){var t={returnDirections:this.returnDirections,returnRoutes:this.returnRoutes,returnZ:this.returnZ,returnStops:this.returnStops,returnBarriers:this.returnBarriers,returnPolygonBarriers:this.returnPolygonBarriers,returnPolylineBarriers:this.returnPolylineBarriers,attributeParameterValues:this.attributeParameterValues&&JSON.stringify(this.attributeParameterValues),outSR:this.outSpatialReference?this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()):null,outputLines:a.toJSON(this.outputLines),findBestSequence:this.findBestSequence,preserveFirstStop:this.preserveFirstStop,preserveLastStop:this.preserveLastStop,useTimeWindows:this.useTimeWindows,startTime:this.startTime?this.startTime.getTime():null,startTimeIsUTC:this.startTimeIsUTC,accumulateAttributeNames:this.accumulateAttributes?this.accumulateAttributes.join(","):null,ignoreInvalidLocations:this.ignoreInvalidLocations,impedanceAttributeName:this.impedanceAttribute,restrictionAttributeNames:this.restrictionAttributes?this.restrictionAttributes.join(","):null,restrictUTurns:o.toJSON(this.restrictUTurns),useHierarchy:this.useHierarchy,directionsLanguage:this.directionsLanguage,outputGeometryPrecision:this.outputGeometryPrecision,outputGeometryPrecisionUnits:u.toJSON(this.outputGeometryPrecisionUnits),directionsLengthUnits:n.toJSON(this.directionsLengthUnits),directionsTimeAttributeName:this.directionsTimeAttribute,directionsStyleName:this.directionsStyleName,travelMode:this.travelMode},r=this.stops;if("esri.tasks.support.FeatureSet"===r.declaredClass&&r.features.length>0?t.stops=JSON.stringify({type:"features",features:i._encodeGraphics(r.features,e&&e["stops.features"]),doNotLocateOnRestrictedElements:this.doNotLocateOnRestrictedElements}):"esri.tasks.support.DataLayer"===r.declaredClass?t.stops=r:"esri.tasks.support.DataFile"===r.declaredClass&&(t.stops=JSON.stringify({type:"features",url:r.url,doNotLocateOnRestrictedElements:this.doNotLocateOnRestrictedElements})),this.directionsOutputType)switch(this.directionsOutputType.toLowerCase()){case"complete":t.directionsOutputType="esriDOTComplete";break;case"complete-no-events":t.directionsOutputType="esriDOTCompleteNoEvents";break;case"instructions-only":t.directionsOutputType="esriDOTInstructionsOnly";break;case"standard":t.directionsOutputType="esriDOTStandard";break;case"summary-only":t.directionsOutputType="esriDOTSummaryOnly";break;default:t.directionsOutputType=this.directionsOutputType}var l=function(t,r){return t?"esri.tasks.support.FeatureSet"===t.declaredClass?t.features.length>0?JSON.stringify({type:"features",features:i._encodeGraphics(t.features,e&&e[r])}):null:"esri.tasks.support.DataLayer"===t.declaredClass?t:"esri.tasks.support.DataFile"===t.declaredClass?JSON.stringify({type:"features",url:t.url}):JSON.stringify(t):null};return this.barriers&&(t.barriers=l(this.barriers,"barriers.features")),this.polygonBarriers&&(t.polygonBarriers=l(this.polygonBarriers,"polygonBarriers.features")),this.polylineBarriers&&(t.polylineBarriers=l(this.polylineBarriers,"polylineBarriers.features")),s.filter(t,function(e){return null!==e?!0:void 0})}});return l});