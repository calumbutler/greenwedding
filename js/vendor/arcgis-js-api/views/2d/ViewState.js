// COPYRIGHT Â© 2016 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/4.2/esri/copyright.txt for details.

define(["require","exports","../../core/tsSupport/declareExtendsHelper","../../core/tsSupport/decorateHelper","../../core/accessorSupport/decorators","../../core/Accessor","../../geometry/Extent","./viewpointUtils","./math/vec2","./math/mat2d"],function(e,t,r,n,o,i,p,l,s,a){var u=function(e){function t(){e.apply(this,arguments),this.size=[0,0]}return r(t,e),Object.defineProperty(t.prototype,"center",{get:function(){var e=this.viewpoint.targetGeometry;return s.set(s.create(),e.x,e.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extent",{get:function(){return l.getExtent(new p,this.viewpoint,this.size)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.size?this.size[1]:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._get("id")+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inverseTransform",{get:function(){return a.invert(a.create(),this.transform)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"latitude",{get:function(){return this.viewpoint.targetGeometry.latitude},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.viewpoint.targetGeometry.longitude},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return l.getResolution(this.viewpoint)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.viewpoint.rotation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.viewpoint.scale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"screenCenter",{get:function(){return s.scale(s.create(),this.size,.5)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spatialReference",{get:function(){return this.viewpoint.targetGeometry.spatialReference},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transform",{get:function(){return l.getTransform(a.create(),this.viewpoint,this.size)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transformNoRotation",{get:function(){return l.getTransformNoRotation(a.create(),this.viewpoint,this.size)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clippedExtent",{get:function(){return l.getClippedExtent(new p,this.viewpoint,this.size)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.size?this.size[0]:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"worldScreenWidth",{get:function(){return l.getWorldScreenWidth(this.spatialReference,this.resolution)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"worldWidth",{get:function(){return l.getWorldWidth(this.spatialReference)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrappable",{get:function(){return!!this.spatialReference&&this.spatialReference.isWrappable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.center[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.center[1]},enumerable:!0,configurable:!0}),t.prototype.copy=function(e){this.viewpoint&&this.size?(this._set("viewpoint",l.copy(this.viewpoint,e.viewpoint)),this._set("size",s.copy(this.size,e.size))):(this.viewpoint=e.viewpoint.clone(),s.copy(this.size,e.size))},t.prototype.clone=function(){return new t({viewpoint:this.viewpoint.clone(),size:s.clone(this.size)})},t.prototype.toMap=function(e,t){return s.transformMat2d(e,t,this.inverseTransform)},t.prototype.toScreen=function(e,t){return s.transformMat2d(e,t,this.transform)},t.prototype.pixelSizeAt=function(e){var t=this.viewpoint;return l.pixelSizeAt(e,t,this.size)},n([o.property({dependsOn:["viewpoint"]})],t.prototype,"center",null),n([o.property({readOnly:!0,dependsOn:["viewpoint","size"]})],t.prototype,"extent",null),n([o.property({readOnly:!0,dependsOn:["size"]})],t.prototype,"height",null),n([o.property({value:0,readOnly:!0,dependsOn:["transform"]})],t.prototype,"id",null),n([o.property({readOnly:!0,dependsOn:["transform"]})],t.prototype,"inverseTransform",null),n([o.property({readOnly:!0,dependsOn:["viewpoint"]})],t.prototype,"latitude",null),n([o.property({readOnly:!0,dependsOn:["viewpoint"]})],t.prototype,"longitude",null),n([o.property({readOnly:!0,dependsOn:["viewpoint"]})],t.prototype,"resolution",null),n([o.property({readOnly:!0,dependsOn:["viewpoint"]})],t.prototype,"rotation",null),n([o.property({readOnly:!0,dependsOn:["viewpoint"]})],t.prototype,"scale",null),n([o.property({readOnly:!0,dependsOn:["size"]})],t.prototype,"screenCenter",null),n([o.property()],t.prototype,"size",void 0),n([o.property({readOnly:!0,dependsOn:["viewpoint"]})],t.prototype,"spatialReference",null),n([o.property({readOnly:!0,dependsOn:["viewpoint","size"]})],t.prototype,"transform",null),n([o.property({readOnly:!0,dependsOn:["viewpoint","size"]})],t.prototype,"transformNoRotation",null),n([o.property()],t.prototype,"viewpoint",void 0),n([o.property({readOnly:!0,dependsOn:["viewpoint","size"]})],t.prototype,"clippedExtent",null),n([o.property({readOnly:!0,dependsOn:["size"]})],t.prototype,"width",null),n([o.property({readOnly:!0,dependsOn:["worldWidth","resolution"]})],t.prototype,"worldScreenWidth",null),n([o.property({readOnly:!0,dependsOn:["spatialReference"]})],t.prototype,"worldWidth",null),n([o.property({readOnly:!0,dependsOn:["spatialReference"]})],t.prototype,"wrappable",null),n([o.property({readOnly:!0,dependsOn:["center"]})],t.prototype,"x",null),n([o.property({readOnly:!0,dependsOn:["center"]})],t.prototype,"y",null),t=n([o.subclass("esri.views.2d.ViewState")],t)}(o.declared(i));return u});